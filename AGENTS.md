# Agent Operational Guidelines

This repository contains a React + Vite + TypeScript application using Bun, Tailwind CSS, Shadcn UI, and Three.js for 3D VRM avatar rendering.

## 1. Build, Lint, and Test Commands

**Runtime:** Use `bun` for all package management and script execution.

*   **Install Dependencies:** `bun install`
*   **Start Development Server:** `bun dev`
*   **Build for Production:** `bun run build` (runs `tsc -b && vite build`)
*   **Preview Production Build:** `bun run preview`
*   **Lint Code:** `bun run lint` (uses ESLint)
*   **Type Check:** `bun x tsc --noEmit`

**Testing:**
*   Currently, no testing framework (Vitest/Jest) is set up in `package.json`.
*   *If tests are added in the future:*
    *   **Run All Tests:** `bun test` (if using Bun's test runner) or `bun run test` (if using Vitest script).
    *   **Run Single Test:** `bun test <filename>`

## 2. Code Style & Conventions

### General
*   **Language:** TypeScript (Strict mode enabled).
*   **Runtime:** Bun.
*   **Framework:** React 19 (Functional components with Hooks).
*   **Styling:** Tailwind CSS v4 (Utility-first). Use `clsx` and `tailwind-merge` (via `cn` utility) for dynamic class names.
*   **UI Components:** Shadcn UI (located in `src/components/ui`).

### Directory Structure
*   `src/components/ui/`: Reusable primitive components (Shadcn).
*   `src/components/`: Feature-specific components (e.g., `ChatInterface.tsx`).
*   `src/lib/`: Utility functions (e.g., `utils.ts`).
*   `src/assets/`: Static assets imported in code.
*   `public/`: Public static files served as-is (e.g., `public/vrm/`).

### Naming Conventions
*   **Files:** PascalCase for React components (`Avatar.tsx`), camelCase for utilities (`utils.ts`).
*   **Components:** PascalCase (`ChatInterface`, `Button`).
*   **Interfaces/Types:** PascalCase (`Message`, `ButtonProps`).
*   **Variables/Functions:** camelCase (`handleSend`, `isLoading`).
*   **Constants:** UPPER_CASE for global constants, camelCase for component-level constants.

### TypeScript & Typing
*   **Explicit Types:** Define interfaces/types for all props and state objects.
*   **Avoid `any`:** Use strictly typed interfaces. If `any` is absolutely necessary (e.g., with complex Three.js internals not well-typed), add a comment explaining why.
*   **Props:** Use `interface` for props definitions.

### Imports
*   **Absolute Imports:** Use the `@/` alias for imports from `src/` (e.g., `import { Button } from "@/components/ui/button"`).
*   **Order:**
    1.  React / Standard libraries.
    2.  Third-party libraries (Three.js, Radix UI, Lucide).
    3.  Internal components (Absolute imports `@/...`).
    4.  Local imports (Relative imports `./...`).
    5.  Styles.

### React Patterns
*   **Functional Components:** Use function declarations `export function ComponentName() { ... }`.
*   **Hooks:** Place hooks at the top of the component.
*   **3D/Three.js:**
    *   Use `@react-three/fiber` for declarative 3D scenes.
    *   Use `@react-three/drei` for helpers (OrbitControls, Environment).
    *   Load models using `useLoader` or specialized loaders (`VRMLoaderPlugin`).
    *   Handle async model loading with `<Suspense>`.

### Error Handling
*   **Async Operations:** Use `try/catch` blocks for async functions.
*   **Model Loading:** Handle loading errors in Three.js loaders (provide error callbacks).
*   **UI Feedback:** Fail gracefully in the UI if a component or asset fails to load (e.g., use `ErrorBoundary` or fallback UI).

### Tailwind & Styling
*   **Utility Classes:** Prefer Tailwind utility classes over custom CSS.
*   **Conditionals:** Use the `cn(...)` utility for conditional class application.
*   **Shadcn:** When modifying Shadcn components, keep the core structure but customize via `className` or the `class-variance-authority` (cva) config.

### Git & Version Control
*   **Commits:** Use clear, descriptive commit messages.
*   **Ignores:** Ensure `node_modules`, `dist`, `.env` are in `.gitignore`.

---
*Generated by opencode*
